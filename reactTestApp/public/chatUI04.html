<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modern HTML Editor & Chat</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 100vh;
      overflow: hidden;
    }

    .main-container {
      display: flex;
      height: 100vh;
      gap: 0;
    }

    .sidebar {
      width: 25%;
      background: #1a1a2e;
      display: flex;
      flex-direction: column;
      border-right: 1px solid #16213e;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
    }

    .sidebar-header {
      padding: 24px;
      border-bottom: 1px solid #16213e;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-size: 18px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .sidebar-icon {
      width: 24px;
      height: 24px;
    }

    .chat-area {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      display: flex;
      gap: 8px;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.user {
      justify-content: flex-end;
    }

    .message.assistant {
      justify-content: flex-start;
    }

    .message-bubble {
      max-width: 85%;
      padding: 12px 16px;
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.4;
      word-wrap: break-word;
    }

    .message.user .message-bubble {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .message.assistant .message-bubble {
      background: #2d2d44;
      color: #e0e0e0;
      border-bottom-left-radius: 4px;
    }

    .loading-indicator {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .dot {
      width: 6px;
      height: 6px;
      background: #667eea;
      border-radius: 50%;
      animation: bounce 1.4s infinite;
    }

    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
        opacity: 0.5;
      }
      50% {
        transform: translateY(-8px);
        opacity: 1;
      }
    }

    .input-area {
      padding: 16px;
      border-top: 1px solid #16213e;
      display: flex;
      gap: 8px;
      background: #1a1a2e;
    }

    .input-field {
      flex: 1;
      padding: 10px 14px;
      background: #2d2d44;
      border: 1px solid #16213e;
      border-radius: 8px;
      color: #e0e0e0;
      font-size: 14px;
      outline: none;
      transition: all 0.2s;
    }

    .input-field:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .input-field::placeholder {
      color: #666;
    }

    .icon-button {
      width: 40px;
      height: 40px;
      padding: 0;
      background: #2d2d44;
      border: 1px solid #16213e;
      border-radius: 8px;
      color: #667eea;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .icon-button:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .icon-button svg {
      width: 20px;
      height: 20px;
    }

    .send-btn {
      width: 40px;
      height: 40px;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .send-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
    }

    .send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .content-area {
      flex: 1;
      display: flex;
      gap: 0;
      background: white;
    }

    .editor-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      border-right: 1px solid #e0e0e0;
    }

    .preview-section {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .section-header {
      padding: 16px 20px;
      background: #f5f5f5;
      border-bottom: 1px solid #e0e0e0;
      font-weight: 600;
      color: #333;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .section-header-icon {
      width: 18px;
      height: 18px;
      color: #667eea;
    }

    .editor-content {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .html-editor {
      flex: 1;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      background: #1e1e1e;
      color: #10b981;
      border: none;
      resize: none;
      outline: none;
      line-height: 1.6;
    }

    .preview-frame {
      flex: 1;
      width: 100%;
      border: none;
      background: white;
    }

    .preview-empty {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #999;
      font-size: 14px;
    }

    .image-input {
      display: none;
    }

    .image-preview-container {
      padding: 8px 16px;
      max-height: 150px;
      overflow-y: auto;
      border-bottom: 1px solid #e0e0e0;
    }

    .image-preview {
      max-width: 100px;
      max-height: 100px;
      border-radius: 4px;
      margin: 4px 0;
    }

    .hidden {
      display: none !important;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #667eea;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #764ba2;
    }

    .sidebar ::-webkit-scrollbar-thumb {
      background: #667eea;
    }

    .info-text {
      text-align: center;
      color: #999;
      font-size: 13px;
      padding: 8px;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
  <div class="main-container">
    <!-- Left Sidebar - Chat -->
    <div class="sidebar">
      <div class="sidebar-header">
        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
        </svg>
        AI Assistant
      </div>

      <div class="chat-area" id="chatArea">
        <div class="message assistant">
          <div class="message-bubble">
            ðŸ‘‹ Hello! I can help you modify and create HTML. Share your HTML code or describe what you'd like to build!
          </div>
        </div>
      </div>

      <div class="input-area">
        <input type="file" id="imageInput" class="image-input" accept="image/*">
        <button class="icon-button" id="imageButton" title="Upload image">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
        </button>
        <input type="text" class="input-field" id="chatInput" placeholder="Type your request...">
        <button class="send-btn" id="sendButton">
          <svg fill="currentColor" viewBox="0 0 24 24">
            <path d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 L4.13399899,1.16584348 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.837654326,3.0486314 1.15159189,3.99701575 L3.03521743,10.4380088 C3.03521743,10.5950899 3.19218622,10.7521873 3.50612381,10.7521873 L16.6915026,11.5376742 C16.6915026,11.5376742 17.1624089,11.5376742 17.1624089,12.0089663 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Right Content Area -->
    <div class="content-area">
      <!-- Editor Section -->
      <div class="editor-section">
        <div class="section-header">
          <svg class="section-header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
          </svg>
          HTML Editor
        </div>
        <div id="imagePreviewContainer" class="image-preview-container hidden"></div>
        <div class="editor-content">
          <textarea id="htmlEditor" class="html-editor" spellcheck="false"><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Website</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    h1 {
      color: #667eea;
      margin: 0 0 20px 0;
    }
    p {
      color: #666;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Welcome to Modern HTML Editor</h1>
    <p>Create and preview beautiful HTML pages instantly!</p>
  </div>
</body>
</html></textarea>
        </div>
      </div>

      <!-- Preview Section -->
      <div class="preview-section">
        <div class="section-header">
          <svg class="section-header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
          </svg>
          Preview
        </div>
        <iframe id="previewFrame" class="preview-frame"></iframe>
      </div>
    </div>
  </div>

  <script>
    const chatArea = document.getElementById('chatArea');
    const chatInput = document.getElementById('chatInput');
    const sendButton = document.getElementById('sendButton');
    const imageButton = document.getElementById('imageButton');
    const imageInput = document.getElementById('imageInput');
    const htmlEditor = document.getElementById('htmlEditor');
    const previewFrame = document.getElementById('previewFrame');
    const imagePreviewContainer = document.getElementById('imagePreviewContainer');

    let isLoading = false;
    let selectedImage = null;

    // Update preview
    function updatePreview() {
      const htmlContent = htmlEditor.value;
      const blob = new Blob([htmlContent], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      previewFrame.src = url;
    }

    htmlEditor.addEventListener('input', updatePreview);
    updatePreview();

    // Add message to chat
    function addMessage(role, content, imageData) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${role}`;
      
      const bubble = document.createElement('div');
      bubble.className = 'message-bubble';
      bubble.textContent = content;
      
      if (imageData) {
        const img = document.createElement('img');
        img.src = imageData;
        img.className = 'image-preview';
        bubble.appendChild(img);
      }
      
      messageDiv.appendChild(bubble);
      chatArea.appendChild(messageDiv);
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    // Show loading indicator
    function showLoading() {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message assistant';
      messageDiv.id = 'loadingMessage';
      
      const bubble = document.createElement('div');
      bubble.className = 'message-bubble';
      bubble.innerHTML = '<div class="loading-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>';
      
      messageDiv.appendChild(bubble);
      chatArea.appendChild(messageDiv);
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    function removeLoading() {
      const loadingMsg = document.getElementById('loadingMessage');
      if (loadingMsg) loadingMsg.remove();
    }

    // Image handling
    imageButton.addEventListener('click', () => imageInput.click());

    imageInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          selectedImage = event.target.result;
          imagePreviewContainer.innerHTML = `<img src="${selectedImage}" class="image-preview" />`;
          imagePreviewContainer.classList.remove('hidden');
          chatInput.focus();
        };
        reader.readAsDataURL(file);
      }
    });

    // Send message
    function sendMessage() {
      const message = chatInput.value.trim();
      if ((!message && !selectedImage) || isLoading) return;

      const displayMessage = message || 'âœ¨ Create HTML based on this image';
      addMessage('user', displayMessage, selectedImage);
      
      chatInput.value = '';
      isLoading = true;
      sendButton.disabled = true;
      showLoading();

      const currentHTML = htmlEditor.value;
      const imageToSend = selectedImage;
      selectedImage = null;
      imageInput.value = '';
      imagePreviewContainer.classList.add('hidden');
      imagePreviewContainer.innerHTML = '';

      // Simulate API call
      setTimeout(() => {
        removeLoading();
        addMessage('assistant', 'âœ… I\'ve updated the HTML! You can modify it further or ask me for more changes.');
        isLoading = false;
        sendButton.disabled = false;
      }, 1000);
    }

    sendButton.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>
</html>
